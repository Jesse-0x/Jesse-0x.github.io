<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="theme-color" content="#00e7ba"><link rel="manifest" href="/manifest.json?v=2.6.2"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><link rel="mask-icon" href="/%5Bobject%20Object%5D?v=2.6.2" color="#54bcff"><meta name="msapplication-TileImage" content="/%5Bobject%20Object%5D"><meta name="msapplication-TileColor" content="#000000"><meta name="description" content="spotDLDownload your Spotify playlists and songs along with album art and metadata">
<meta property="og:type" content="article">
<meta property="og:title" content="spotDL">
<meta property="og:url" content="https://jessse.me/2021/06/15/">
<meta property="og:site_name" content="Jesse&#39;s Blog">
<meta property="og:description" content="spotDLDownload your Spotify playlists and songs along with album art and metadata">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/spotDL/spotify-downloader/master/docs/static/logo-transparent.png">
<meta property="og:image" content="https://img.shields.io/apm/l/atomic-design-ui.svg?style=flat-square&amp;color=44CC11">
<meta property="og:image" content="https://img.shields.io/pypi/pyversions/spotDL?color=%2344CC11&amp;style=flat-square">
<meta property="og:image" content="https://img.shields.io/github/commits-since/spotDL/spotify-downloader/latest?color=44CC11&amp;style=flat-square">
<meta property="og:image" content="https://img.shields.io/pypi/dw/spotDL?label=downloads@pypi&amp;color=344CC11&amp;style=flat-square">
<meta property="og:image" content="https://img.shields.io/github/contributors/spotDL/spotify-downloader?style=flat-square">
<meta property="og:image" content="https://img.shields.io/discord/771628785447337985?label=discord&amp;logo=discord&amp;style=flat-square">
<meta property="og:image" content="https://asciinema.org/a/wDNFL5XGhdadUK2EnOkv46YMG.svg">
<meta property="og:image" content="https://contributors-img.web.app/image?repo=spotdl/spotify-downloader">
<meta property="article:published_time" content="2021-06-15T15:49:58.000Z">
<meta property="article:modified_time" content="2022-06-11T00:45:37.349Z">
<meta property="article:author" content="Jesse Gong">
<meta property="article:tag" content="Blog Jesse WH Wardlaw Hartridge Student">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/spotDL/spotify-downloader/master/docs/static/logo-transparent.png"><title>spotDL | Jesse's Blog</title><link ref="canonical" href="https://jessse.me/2021/06/15/"><link rel="alternate" href="/atom.xml" type="application/atom+xml"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" data-ad-client="ca-pub-5815090260974106" async="" data-pjax=""></script><script src="https://www.googletagmanager.com/gtag/js?id=G-2KR7HF95GP" async="" data-pjax=""></script><script data-pjax="">if (window.location.hostname !== 'localhost') {
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-2KR7HF95GP');
}</script><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: ["google","bing","baidu"],
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"70px","tocMaxDepth":4},
  header: {"enable":true,"showOnPost":false,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: undefined,
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: true,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: {"avoidBanner":false},
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: {"switchPost":true},
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><!-- hexo injector head_end start --><link rel="manifest" href="/manifest.json" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner header-inner--height header-inner--bgcolor"><nav class="header-nav header-nav--sticky"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-feather-alt"></i></span><span class="header-nav-menu-item__text">Articles</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/archives/"><span class="header-nav-submenu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-submenu-item__text">Archives</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/"><span class="header-nav-submenu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-submenu-item__text">Subjects</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/tags/"><span class="header-nav-submenu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-submenu-item__text">Tags</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">About</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/about/"><span class="header-nav-submenu-item__icon"><i class="fas fa-address-card"></i></span><span class="header-nav-submenu-item__text">Author</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/ideas/"><span class="header-nav-submenu-item__icon"><i class="fas fa-lightbulb"></i></span><span class="header-nav-submenu-item__text">Ideas</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/site/"><span class="header-nav-submenu-item__icon"><i class="far fa-window-restore"></i></span><span class="header-nav-submenu-item__text">Site</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/projects/"><span class="header-nav-menu-item__icon"><i class="fas fa-book"></i></span><span class="header-nav-menu-item__text">Projects</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/moments/"><span class="header-nav-menu-item__icon"><i class="fas fa-images"></i></span><span class="header-nav-menu-item__text">Moments</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">Search</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">spotDL</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-06-15</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-10</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">Words</span><span class="post-meta-item__value">759</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">Reading</span><span class="post-meta-item__value">9m</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">Visited</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body"><h1 id="spotDL"><a href="#spotDL" class="headerlink" title="spotDL"></a><a target="_blank" rel="noopener" href="https://github.com/spotDL/spotify-downloader">spotDL</a></h1><p>Download your Spotify playlists and songs along with album art and metadata</p>
<span id="more"></span>

<p><img src="https://raw.githubusercontent.com/spotDL/spotify-downloader/master/docs/static/logo-transparent.png" alt="image"></p>
<blockquote>
<p>README.MD form <a target="_blank" rel="noopener" href="https://github.com/spotDL/spotify-downloader">GitHub</a></p>
</blockquote>
<div align="center">



<p><a target="_blank" rel="noopener" href="https://github.com/spotDL/spotify-downloader/blob/master/LICENSE"><img src="https://img.shields.io/apm/l/atomic-design-ui.svg?style=flat-square&amp;color=44CC11" alt="MIT License"></a><a target="_blank" rel="noopener" href="https://pypi.org/project/spotdl/"><img src="https://img.shields.io/pypi/pyversions/spotDL?color=%2344CC11&amp;style=flat-square" alt="pypi version"></a> <a target="_blank" rel="noopener" href="https://pypi.org/project/spotdl/"><img src="https://img.shields.io/github/commits-since/spotDL/spotify-downloader/latest?color=44CC11&amp;style=flat-square" alt="GitHub commits since latest release (by date)"><img src="https://img.shields.io/pypi/dw/spotDL?label=downloads@pypi&amp;color=344CC11&amp;style=flat-square" alt="pypi downloads"></a> <a target="_blank" rel="noopener" href="https://discord.gg/xCa23pwJWY"><img src="https://img.shields.io/github/contributors/spotDL/spotify-downloader?style=flat-square" alt="Contributors"><img src="https://img.shields.io/discord/771628785447337985?label=discord&amp;logo=discord&amp;style=flat-square" alt="Discord"></a></p>
</div>

<blockquote>
<p>The fastest, easiest, and most accurate command-line music downloader</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://asciinema.org/a/wDNFL5XGhdadUK2EnOkv46YMG"><img src="https://asciinema.org/a/wDNFL5XGhdadUK2EnOkv46YMG.svg" alt="asciicast"></a></p>
<h2 id="What-spotDL-does"><a href="#What-spotDL-does" class="headerlink" title="What spotDL does"></a>What spotDL does</h2><ol>
<li>Downloads music from YouTube as an MP3 file</li>
<li>Applies basic metadata gathered from Spotify such as:<ul>
<li>Track Name</li>
<li>Track Number</li>
<li>Album</li>
<li>Album Cover</li>
<li>Genre</li>
<li>and more!</li>
</ul>
</li>
</ol>
<h3 id="Redesigned"><a href="#Redesigned" class="headerlink" title="Redesigned"></a>Redesigned</h3><p>spotDL is being redesigned! This means we are currently not accepting new feature requests. You can talk to us on <a target="_blank" rel="noopener" href="https://discord.gg/xCa23pwJWY">our Discord</a> if there is anything further.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Python 3.6.1 or above (added to PATH)</li>
<li>FFmpeg 4.2 or above (added to PATH)</li>
</ul>
<blockquote>
<p><strong><em>YouTube Music must be available in your country for spotDL to work. This is because we use YouTube Music to filter search results. You can check if YouTube Music is available in your country, by visiting <a target="_blank" rel="noopener" href="https://music.youtube.com/">YouTube Music</a>.</em></strong></p>
</blockquote>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="Installing-FFmpeg"><a href="#Installing-FFmpeg" class="headerlink" title="Installing FFmpeg"></a>Installing FFmpeg</h3><ul>
<li><a target="_blank" rel="noopener" href="https://windowsloop.com/install-ffmpeg-windows-10/">Windows Tutorial</a></li>
<li>OSX - <code>brew install ffmpeg</code></li>
<li>Linux - <code>sudo apt install ffmpeg</code></li>
</ul>
<h3 id="Installing-spotDL"><a href="#Installing-spotDL" class="headerlink" title="Installing spotDL"></a>Installing spotDL</h3><ul>
<li><p>Recommended Stable Version:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install spotdl</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Dev Version: <strong>(NOT STABLE)</strong></p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install https://codeload.github.com/spotDL/spotify-downloader/zip/dev</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<p>If you have trouble installing spotdl take a look at the extended installation guide<br><a href="/docs/INSTALLATION.md">here</a> or ask for help in our<br><a target="_blank" rel="noopener" href="https://discord.gg/xCa23pwJWY">discord server</a></p>
<h4 id="On-Termux"><a href="#On-Termux" class="headerlink" title="On Termux"></a>On Termux</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://raw.githubusercontent.com/spotDL/spotify-downloader/master/termux/setup_spotdl.sh | sh</span><br></pre></td></tr></tbody></table></figure>

<h4 id="Arch"><a href="#Arch" class="headerlink" title="Arch"></a>Arch</h4><p>There is an Arch User Repository (AUR) package for <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/python-spotdl/">spotDL</a>.</p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><ul>
<li><h4 id="To-download-a-song-run"><a href="#To-download-a-song-run" class="headerlink" title="To download a song, run"></a>To download a song, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [trackUrl]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/0VjIjW4GlUZAMYd2vXMi3b</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-download-an-album-run"><a href="#To-download-an-album-run" class="headerlink" title="To download an album, run"></a>To download an album, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [albumUrl]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/album/4yP0hdKOZPNshxUOjY0cZj</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-download-a-playlist-run"><a href="#To-download-a-playlist-run" class="headerlink" title="To download a playlist, run"></a>To download a playlist, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [playlistUrl]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/playlist/37i9dQZF1E8UXBoz02kGID</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-download-all-songs-from-an-artist-run"><a href="#To-download-all-songs-from-an-artist-run" class="headerlink" title="To download all songs from an artist run"></a>To download all songs from an artist run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [artistUrl]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/artist/1fZAAHNWdSM5gqbi9o5iEA</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-search-for-and-download-a-song-run-with-quotation-marks"><a href="#To-search-for-and-download-a-song-run-with-quotation-marks" class="headerlink" title="To search for and download a song, run, with quotation marks"></a>To search for and download a song, run, <strong>with quotation marks</strong></h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">'[songQuery]'</span></span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">'The Weeknd - Blinding Lights'</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><em>Note: This is not accurate and often causes errors.</em></p>
</blockquote>
</li>
<li><h4 id="To-resume-a-failed-x2F-incomplete-download-run"><a href="#To-resume-a-failed-x2F-incomplete-download-run" class="headerlink" title="To resume a failed/incomplete download, run"></a>To resume a failed/incomplete download, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [pathToTrackingFile]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">'The Weeknd - Blinding Lights.spotdlTrackingFile'</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><em>Note: <code>.spotdlTrackingFile</code>s are automatically created when a download starts and deleted on completion</em></p>
</blockquote>
</li>
<li><h4 id="You-can-queue-up-multiple-download-tasks-by-separating-the-arguments-with-spaces"><a href="#You-can-queue-up-multiple-download-tasks-by-separating-the-arguments-with-spaces" class="headerlink" title="You can queue up multiple download tasks by separating the arguments with spaces"></a>You can queue up multiple download tasks by separating the arguments with spaces</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songQuery1] [albumUrl] [songQuery2] ... (order does not matter)</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">'The Weeknd - Blinding Lights'</span> https://open.spotify.com/playlist/37i9dQZF1E8UXBoz02kGID ...</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><em>Note: spotDL downloads up to 4 songs in parallel, so for a faster experience, download albums and playlist, rather than tracks.</em></p>
</blockquote>
</li>
<li><h4 id="To-download-youtube-video-with-metadata-from-spotify-run"><a href="#To-download-youtube-video-with-metadata-from-spotify-run" class="headerlink" title="To download youtube video with metadata from spotify, run"></a>To download youtube video with metadata from spotify, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">"YouTubeURL|SpotifyURL"</span></span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl <span class="string">"https://www.youtube.com/watch?v=EO7XnC1YpVo|https://open.spotify.com/track/4fzsfWzRhPawzqhX8Qt9F3"</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>Note: Urls have to be separated with <code>|</code> and quoted properly ex. “YouTubeURL|SpotifyUrl”</p>
</blockquote>
</li>
<li><h4 id="To-download-songs-with-different-output-format-run"><a href="#To-download-songs-with-different-output-format-run" class="headerlink" title="To download songs with different output format run"></a>To download songs with different output format run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --output-format mp3/m4a/flac/opus/ogg/wav</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --output-format opus</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-use-ffmpeg-binary-that-is-not-on-PATH-run"><a href="#To-use-ffmpeg-binary-that-is-not-on-PATH-run" class="headerlink" title="To use ffmpeg binary that is not on PATH run"></a>To use ffmpeg binary that is not on PATH run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --ffmpeg path/to/your/ffmpeg.exe</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --ffmpeg C:\ffmpeg\bin\ffmpeg.exe</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-generate-m3u-file-for-each-playlist-run"><a href="#To-generate-m3u-file-for-each-playlist-run" class="headerlink" title="To generate .m3u file for each playlist run"></a>To generate .m3u file for each playlist run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [playlistUrl] --m3u</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/playlist/37i9dQZF1E8UXBoz02kGID --m3u</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-use-youtube-instead-of-youtube-music-run"><a href="#To-use-youtube-instead-of-youtube-music-run" class="headerlink" title="To use youtube instead of youtube music run"></a>To use youtube instead of youtube music run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --use-youtube</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/4fzsfWzRhPawzqhX8Qt9F3 --use-youtube</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-manually-choose-a-lyrics-provider-run"><a href="#To-manually-choose-a-lyrics-provider-run" class="headerlink" title="To manually choose a lyrics provider, run"></a>To manually choose a lyrics provider, run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --lyrics-provider lyrics_provider</span><br></pre></td></tr></tbody></table></figure>

<p>  available lyrics providers:</p>
<ul>
<li>genius</li>
<li>musixmatch</li>
</ul>
<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/4fzsfWzRhPawzqhX8Qt9F3 --lyrics-provider genius</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-change-number-of-threads-used-when-downloading-songs-run"><a href="#To-change-number-of-threads-used-when-downloading-songs-run" class="headerlink" title="To change number of threads used when downloading songs run"></a>To change number of threads used when downloading songs run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --dt [number]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/4fzsfWzRhPawzqhX8Qt9F3 --dt 8</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-change-number-of-threads-used-when-searching-for-songs-run"><a href="#To-change-number-of-threads-used-when-searching-for-songs-run" class="headerlink" title="To change number of threads used when searching for songs run"></a>To change number of threads used when searching for songs run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --st [number]</span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/4fzsfWzRhPawzqhX8Qt9F3 --st 8</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-ignore-your-ffmpeg-version-run"><a href="#To-ignore-your-ffmpeg-version-run" class="headerlink" title="To ignore your ffmpeg version run"></a>To ignore your ffmpeg version run</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --ignore-ffmpeg-version</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="To-use-path-template"><a href="#To-use-path-template" class="headerlink" title="To use path template"></a>To use path template</h4>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl [songUrl] --path-template <span class="string">'template'</span></span><br></pre></td></tr></tbody></table></figure>

<p>  example:</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotdl https://open.spotify.com/track/0VjIjW4GlUZAMYd2vXMi3b --path-template <span class="string">'{artist}/{album}/{title} - {artist}.{ext}'</span></span><br></pre></td></tr></tbody></table></figure>

<p>  possible values:</p>
<ul>
<li>{artist}</li>
<li>{artists}</li>
<li>{title}</li>
<li>{album}</li>
<li>{ext}</li>
<li>{playlist}</li>
</ul>
</li>
</ul>
<h2 id="pipx-Isolated-Environment-Alternative"><a href="#pipx-Isolated-Environment-Alternative" class="headerlink" title="pipx Isolated Environment Alternative"></a><code>pipx</code> Isolated Environment Alternative</h2><p>For users who are not familiar with <code>pipx</code>, it can be used to run scripts <strong>without</strong><br>installing the spotDL package and all the dependencies globally with pip. (Effectively<br>skipping over the <a href="#Installing-spotDL">spotDL Installation</a> step)</p>
<p>First, you will need to install <code>pipx</code> by running:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user pipx</span><br><span class="line">python3 -m pipx ensurepath</span><br></pre></td></tr></tbody></table></figure>

<p>Next, you can jump directly to running spotDL with:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipx run spotdl ...</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Contributor-Guide"><a href="#Contributor-Guide" class="headerlink" title="Contributor Guide"></a>Contributor Guide</h2><p>Interested in contributing? Check out our <a href="docs/CONTRIBUTING.md">CONTRIBUTING.md</a> to find<br>resources around contributing along with a guide on how to set up a development<br>environment.</p>
<h2 id="Contributors"><a href="#Contributors" class="headerlink" title="Contributors"></a>Contributors</h2><p><a target="_blank" rel="noopener" href="https://github.com/spotdl/spotify-downloader/graphs/contributors"><img src="https://contributors-img.web.app/image?repo=spotdl/spotify-downloader" alt="contributors"></a></p>
<h2 id="Authors"><a href="#Authors" class="headerlink" title="Authors"></a>Authors</h2><ol>
<li><a target="_blank" rel="noopener" href="https://github.com/ritiek">@ritiek</a> for creating and maintaining spotDL for 4 years</li>
<li><a target="_blank" rel="noopener" href="https://github.com/rocketinventor">@rocketinventor</a> for figuring out YouTube Music<br>querying</li>
<li><a target="_blank" rel="noopener" href="https://github.com/MikhailZex">@MikhailZex</a> for, never mind…</li>
</ol>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><a href="/LICENSE">MIT</a></p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2022/03/26/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Three.js Application Test</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2021/02/03/"><span class="paginator-prev__text">checkra1n</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="utterances-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spotDL"><span class="toc-number">1.</span> <span class="toc-text">spotDL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-spotDL-does"><span class="toc-number">1.1.</span> <span class="toc-text">What spotDL does</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redesigned"><span class="toc-number">1.1.1.</span> <span class="toc-text">Redesigned</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prerequisites"><span class="toc-number">1.2.</span> <span class="toc-text">Prerequisites</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installation"><span class="toc-number">1.3.</span> <span class="toc-text">Installation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-FFmpeg"><span class="toc-number">1.3.1.</span> <span class="toc-text">Installing FFmpeg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-spotDL"><span class="toc-number">1.3.2.</span> <span class="toc-text">Installing spotDL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#On-Termux"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">On Termux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Arch"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">Arch</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-number">1.4.</span> <span class="toc-text">Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-a-song-run"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">To download a song, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-an-album-run"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">To download an album, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-a-playlist-run"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">To download a playlist, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-all-songs-from-an-artist-run"><span class="toc-number">1.4.0.4.</span> <span class="toc-text">To download all songs from an artist run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-search-for-and-download-a-song-run-with-quotation-marks"><span class="toc-number">1.4.0.5.</span> <span class="toc-text">To search for and download a song, run, with quotation marks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-resume-a-failed-x2F-incomplete-download-run"><span class="toc-number">1.4.0.6.</span> <span class="toc-text">To resume a failed&#x2F;incomplete download, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#You-can-queue-up-multiple-download-tasks-by-separating-the-arguments-with-spaces"><span class="toc-number">1.4.0.7.</span> <span class="toc-text">You can queue up multiple download tasks by separating the arguments with spaces</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-youtube-video-with-metadata-from-spotify-run"><span class="toc-number">1.4.0.8.</span> <span class="toc-text">To download youtube video with metadata from spotify, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-download-songs-with-different-output-format-run"><span class="toc-number">1.4.0.9.</span> <span class="toc-text">To download songs with different output format run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-use-ffmpeg-binary-that-is-not-on-PATH-run"><span class="toc-number">1.4.0.10.</span> <span class="toc-text">To use ffmpeg binary that is not on PATH run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-generate-m3u-file-for-each-playlist-run"><span class="toc-number">1.4.0.11.</span> <span class="toc-text">To generate .m3u file for each playlist run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-use-youtube-instead-of-youtube-music-run"><span class="toc-number">1.4.0.12.</span> <span class="toc-text">To use youtube instead of youtube music run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-manually-choose-a-lyrics-provider-run"><span class="toc-number">1.4.0.13.</span> <span class="toc-text">To manually choose a lyrics provider, run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-change-number-of-threads-used-when-downloading-songs-run"><span class="toc-number">1.4.0.14.</span> <span class="toc-text">To change number of threads used when downloading songs run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-change-number-of-threads-used-when-searching-for-songs-run"><span class="toc-number">1.4.0.15.</span> <span class="toc-text">To change number of threads used when searching for songs run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-ignore-your-ffmpeg-version-run"><span class="toc-number">1.4.0.16.</span> <span class="toc-text">To ignore your ffmpeg version run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#To-use-path-template"><span class="toc-number">1.4.0.17.</span> <span class="toc-text">To use path template</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pipx-Isolated-Environment-Alternative"><span class="toc-number">1.5.</span> <span class="toc-text">pipx Isolated Environment Alternative</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contributor-Guide"><span class="toc-number">1.6.</span> <span class="toc-text">Contributor Guide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contributors"><span class="toc-number">1.7.</span> <span class="toc-text">Contributors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Authors"><span class="toc-number">1.8.</span> <span class="toc-text">Authors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#License"><span class="toc-number">1.9.</span> <span class="toc-text">License</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/Jesse.svg" alt="avatar"></div><p class="sidebar-ov-author__text">Jesse</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/Jesse-0x" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="mailto:jgong@whschool.org" target="_blank" rel="noopener" data-popover="Google" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-google"></i></span></a><a class="sidebar-ov-social-item" href="weixin://dl/add/Jesse_gongGongruiyan" target="_blank" rel="noopener" data-popover="Wechat" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weixin"></i></span></a></div><div class="sidebar-ov-feed"><span class="sidebar-ov-feed-email"><a class="sidebar-ov-feed-email__link" href="NOT_DONE_YET" target="_blank" rel="noopener"><span class="sidebar-ov-feed-email__icon"><i class="fas fa-envelope"></i></span><span>Email Subscribe</span></a></span><span class="sidebar-ov-feed-rss"><a class="sidebar-ov-feed-rss__link" href="/atom.xml" target="_blank" rel="noopener"><span class="sidebar-ov-feed-rss__icon"><i class="fas fa-rss"></i></span><span>RSS Subscribe</span></a></span></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020~2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Jesse Gong</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">Visitors</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">Views</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div><div>“The people who are crazy enough to think they can change the world are the ones who do.” — Steve Jobs</div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="Search for Posts (Support multiple keywords)"><div class="search-btns">Search by:<span class="search-btns-item search-btns-item--google"><i class="fab fa-google"></i>Google</span><span class="search-btns-item search-btns-item--bing"><i></i>Bing</span><span class="search-btns-item search-btns-item--baidu"><i></i>Baidu</span></div></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/ribbon.js@latest/dist/ribbon.min.js" size="120" alpha="0.6" zIndex="-1"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ Untitled ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);

function safeOpenUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}

function extSearch(engine) {
  var engines = {
    google: 'https://www.google.com/search?q=',
    bing: 'https://cn.bing.com/search?q=',
    baidu: 'https://www.baidu.com/s?ie=UTF-8&wd=',
  };
  var host = window.location.host;
  var query = $('.search-input input').val().toLowerCase().trim();
  var uri = engines[engine] + query + ' site:' + host;

  if (query) {
    safeOpenUrl(uri);
  } else {
    Stun.utils.popAlert('warning', 'Please enter characters');
  }
}

var assistSearchList = window.CONFIG.assistSearch;

if (Array.isArray(assistSearchList)) {
  assistSearchList.forEach(function (name) {
    document.querySelector('.search-btns-item--' + name).addEventListener('click', function () {
      extSearch(name);
    }, false);
  });
}</script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js"></script><script>window.addEventListener('DOMContentLoaded', function () {
  var pjax = new Pjax({"selectors":["head title","#main",".pjax-reload",".header-inner"],"history":true,"scrollTo":false,"scrollRestoration":false,"cacheBust":false,"debug":false,"currentUrlFullReload":false,"timeout":0});
  // 加载进度条的计时器
  var loadingTimer = null;

  // 重置页面 Y 方向上的滚动偏移量
  document.addEventListener('pjax:send', function () {
    $('.header-nav-menu').removeClass('show');
    if (CONFIG.pjax && CONFIG.pjax.avoidBanner) {
      $('html').velocity('scroll', {
        duration: 500,
        offset: $('#header').height(),
        easing: 'easeInOutCubic'
      });
    }

    var loadingBarWidth = 20;
    var MAX_LOADING_WIDTH = 95;

    $('.loading-bar').addClass('loading');
    $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    clearInterval(loadingTimer);
    loadingTimer = setInterval(function () {
      loadingBarWidth += 3;
      if (loadingBarWidth > MAX_LOADING_WIDTH) {
        loadingBarWidth = MAX_LOADING_WIDTH;
      }
      $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    }, 500);
  }, false);

  window.addEventListener('pjax:complete', function () {
    clearInterval(loadingTimer);
    $('.loading-bar__progress').css('width', '100%');
    $('.loading-bar').removeClass('loading');
    setTimeout(function () {
      $('.loading-bar__progress').css('width', '0');
    }, 400);
    $('link[rel=prefetch], script[data-pjax-rm]').each(function () {
      $(this).remove();
    });
    $('script[data-pjax], #pjax-reload script').each(function () {
      $(this).parent().append($(this).remove());
    });

    if (Stun.utils.pjaxReloadBoot) {
      Stun.utils.pjaxReloadBoot();
    }
    if (Stun.utils.pjaxReloadScroll) {
      Stun.utils.pjaxReloadScroll();
    }
    if (Stun.utils.pjaxReloadSidebar) {
      Stun.utils.pjaxReloadSidebar();
    }
    if (true) {
      if (Stun.utils.pjaxReloadHeader) {
        Stun.utils.pjaxReloadHeader();
      }
      if (Stun.utils.pjaxReloadScrollIcon) {
        Stun.utils.pjaxReloadScrollIcon();
      }
      if (Stun.utils.pjaxReloadLocalSearch) {
        Stun.utils.pjaxReloadLocalSearch();
      }
    }
  }, false);
}, false);</script><div id="pjax-reload"><script src="https://cdn.jsdelivr.net/npm/quicklink@1.0.1/dist/quicklink.umd.js"></script><script>function initQuicklink() {
  quicklink({
    timeout: '10000',
    priority: true,
    ignores: [uri => uri.includes('#'), uri => uri === 'https://jessse.me/2021/06/15/', /\/api\/?/,uri => uri.includes('.xml'),uri => uri.includes('.zip'),(uri, el) => el.hasAttribute('nofollow'),(uri, el) => el.hasAttribute('noprefetch')]
  });
}

if (true || false) {
  initQuicklink();
} else {
  window.addEventListener('DOMContentLoaded', initQuicklink, false);
}</script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script></div><script data-pjax="">function loadUtterances() {
  var d = document, s = d.createElement('script');
  var container = d.getElementById('utterances-container');

  if (!container) {
    return;
  }
  s.src = 'https://utteranc.es/client.js';
  s.setAttribute('repo', 'Jesse-0x/Jesse-0x.github.io');
  s.setAttribute('issue-term', 'title');
  s.setAttribute('label', 'utterances');
  s.setAttribute('theme', 'github-light');
  s.setAttribute('crossorigin', 'anonymous');
  s.setAttribute('async', '');
  if (true) {
    s.setAttribute('data-pjax-rm', '');
  }
  container.append(s);
}

if (true) {
  loadUtterances();
} else {
  window.addEventListener('DOMContentLoaded', loadUtterances, false);
}</script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script><!-- hexo injector body_end start --><script>
// Check that service workers are supported
if ('serviceWorker' in navigator) {
  // Use the window load event to keep the page load performant
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js');
  });
}
</script>
<!-- hexo injector body_end end --></body></html>